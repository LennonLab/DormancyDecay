from __future__ import division
import pandas as pd
import numpy as np
import sys
import os
from random import sample
from mpl_toolkits.basemap import Basemap

import matplotlib # statements for running on IU servers be sure to comment out
matplotlib.use('Agg') # if running on local machine, resets where python looks
from matplotlib import pyplot as plt


# 49 sites, 21568 for active, 27446 for all


mydir = os.path.expanduser('~/GitHub/DistDecay')
#sys.path.append(mydir+'/tools')
#mydir2 = os.path.expanduser("~/")

sites = ['BC001', 'BC002', 'BC003', 'BC004', 'BC005', 'BC015', 'BC016', 'BC018',
    'BC020', 'BC048', 'BC049', 'BC051', 'BC105', 'BC108', 'BC262', 'BCL01', 'BCL03',
    'HNF132', 'HNF133', 'HNF134', 'HNF144', 'HNF168', 'HNF185', 'HNF187', 'HNF216',
    'HNF217', 'HNF224', 'HNF225', 'HNF229', 'HNF242', 'HNF250', 'HNF267', 'HNF269',
    'YSF004', 'YSF117', 'YSF295', 'YSF296', 'YSF298', 'YSF300', 'YSF44', 'YSF45',
    'YSF47', 'YSF65', 'YSF66', 'YSF69', 'YSF70', 'YSF71', 'YSF74', 'YSF46']

lats = [39.12153, 39.16358, 39.15219, 39.14453, 39.14850, 39.13319, 39.12753,
    39.12389, 39.12781, 39.13289, 39.14017, 39.14211, 39.13558, 39.13306, 39.17614,
    39.16792, 39.17525, 39.03828, 39.04647, 39.04306, 39.05306, 39.03511, 38.99197,
    39.01184, 39.02426, 39.02142, 39.03236, 39.04264, 39.04942, 39.00874, 39.02928,
    39.00381, 39.09983, 39.12428, 39.13302, 39.13442, 39.13158, 39.12840, 39.12552,
    39.10983, 39.11367, 39.11690, 39.14217, 39.13778, 39.12981, 39.12757, 39.12328,
    39.11077, 39.31186]

lons = [-86.19458, -86.21181, -86.19418, -86.19269, -86.19017, -86.19683,
    -86.19928, -86.20672, -86.20983, -86.27564, -86.27589, -86.27064, -86.26500,
    -86.25761, -86.20572, -86.20389, -86.20944, -86.20919, -86.21550, -86.21444,
    -86.21864, -86.32964, -86.38756, -86.40976, -86.31246, -86.31678, -86.30386,
    -86.31614, -86.31747, -86.30509, -86.31967, -86.30583, -86.30682, -86.28244,
    -86.30795, -86.28058, -86.29511, -86.32757, -86.34250, -86.29811, -86.29333,
    -86.28442, -86.28608, -86.29753, -86.28333, -86.28623, -86.28867, -86.28670,
    -86.29028]

pca1 = np.array([0.007964759, -0.715332502,  2.800532984, -1.187378415, -0.245413457,
    1.233441647, 1.048994922, -0.610791161, 1.848536585, 1.489760377, 2.667942653,
    1.491000147, 0.814180326, 2.763985883, -0.275843286, 0.811348483, 5.554071751,
    0.151116695, 1.943780705, 1.072454770, -2.442073164, -2.453335143, -1.707364094,
    -3.259677468, -3.978708479, -3.353849495, -0.863215939, -4.406313719, -2.267820290,
    -4.427195851, 0.045494015, -0.317143529, -5.311631597, 1.946258710, 1.112604430,
    0.918510602, 2.804031555, 0.275000370, 0.763894693, 2.438611085, 0.722237818,
    -0.946694727, -0.898205966, -0.353941211, 2.085939359, 0.127581555, -0.178851271,
    1.440933800, -0.179429911])

pca2 = np.array([2.60648629, 0.12622779, 0.95847611, 0.32111985, 0.60736887, 0.31723301,
    -0.05078268, 1.76506264, -0.40095732, 0.07240195, -0.85873836, -2.38265001,
    -2.22679612, 0.19917412, -0.71006024, -0.50852506, -0.51670454, -3.19934978,
    0.68383524, -1.70745989, 1.05658007, -1.14304690, -0.40064736, 1.39786920,
    0.87543503, -0.10102940, -0.13583932, 1.82486957, -1.73711807, -0.59548597,
    -0.64131521, -1.68263514, -2.57137012, -0.41545861, 0.68642437, -1.82829359,
    0.91376865, 1.61734999, 1.24261785, 1.55562132, 1.29759799, -0.03644680,
    -0.15894272, 2.07110743, -0.61837064, 0.01621414, 0.84646948, -0.14885662,
    1.71756949])

colors = (abs(min(pca1)) + pca1)/(abs(min(pca1)) + max(pca1)).tolist()
colors = ['{:.3f}'.format(x) for x in colors]

# setup Lambert Conformal basemap.
m = Basemap(width=30000,
            height=30000,
            projection='lcc',
            resolution='c',
            lat_1 = None,
            lat_2 = None,
            lat_0 = np.mean(lats),
            lon_0 = np.mean(lons))

xpt,ypt = m(lons,lats)

# convert back to lat/lon
lonpt, latpt = m(xpt,ypt,inverse=True)
m.scatter(xpt,ypt, color=colors, marker='o', edgecolors='0.2')  # plot a blue dot there

plt.show()
